<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <!-- Boxicons CSS -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    
    <title>Project 3D Simulation</title>
</head>
<body class="dark">
    <div class="btn">
        <span class="fas fa-bars"></span>
    </div>

    <nav class="sidebar">
        <div class="head">
            <div class="image-text">
                <span class="'image">
                    <img src="logo.png" alt="logo">
                </span>
            </div>

            <div class="details">
                <p class="name">3D Simulation</p>
            </div>
        </div>
        <ul>
                <li>
                    <a href="#" class="feat-btn">Geometry
                        <span class="fas fa-caret-down first"></span>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" onclick="addMesh(1);">Box</a></li>
                        <li><a href="#" onclick="addMesh(2);">Sphere</a></li>
                        <li><a href="#" onclick="addMesh(3);">Cone</a></li>
                        <li><a href="#" onclick="addMesh(4);">Cylinder</a></li>
                        <li><a href="#" onclick="addMesh(5);">Torus</a></li>
                        <li><a href="#" onclick="addMesh(6);">Teapot</a></li>
                        <li><a href="#" onclick="addMesh(7);">Heart</a></li>
                        <li><a href="#" onclick="removeGeometry();">Remove Geometry</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="serv-btn">Surface
                        <span class="fas fa-caret-down second"><span>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" onclick="SetSurface(1);">Point</a></li>
                        <li><a href="#" onclick="SetSurface(2);">Line</a></li>
                        <li><a href="#" onclick="SetSurface(3);">Solid</a></li>
                        <li>
                            <input type="file" accept="image/*" id="texture" style="display: none;"
                            onchange="ImgTexture(window.URL.createObjectURL(this.files[0]))" />
                            <a href="#" name="button" onclick="Uploadimage();">Texture</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#" class="light-btn">Light
                        <span class="fas fa-caret-down third"></span>
                    </a>
                    <ul class="submenu">
                        <li><a href="#" onclick="setLight(1);" >Ambient light</a></li>
                        <li><a href="#" onclick="setLight(2);" >Hemisphere light</a></li>
                        <li><a href="#" onclick="setLight(3);" >Directional Light</a></li>
                        <li><a href="#" onclick="setLight(4);" >Pointlight</a></li>
                        <li><a href="#" onclick="setLight(5);" >Spotlight</a></li>
                        <li><a href="#" onclick="setLight(6);" >Remove Light</a></li>
                    </ul>
                </li>
                <li> 
                    <a href="#" class="animation-btn">Animation
                        <span class="fas fa-caret-down four"></span>
                    </a>
                    <ul class="submenu">
                        <li ><a href="#" onclick="Animation1();">Rotate </a></li>
                        
                        <li><a href="#" onclick="Animation2();">In & Out</a></li>
                        <li><a href="#" onclick="Animation3();">Rotate & Move</a></li>
                        <li><a href="#" onclick="RemoveAllAnimation();">Reset</a></li>
                    </ul>
                </li>
                <li>
                    <button style="margin:10px; margin-right:18px; margin-left:30px; background-color:#695cfe; 
                    font-size:25px; border-radius:7px; padding:6px; cursor: pointer; border: none; color: #fff" 
                    onMouseOver="this.style.color='#000'" onMouseOut="this.style.color='#fff'" onclick="Translate()" >

                    <i class='fas fa-arrows-alt'></i>
                </button>

                <button style="margin:10px; margin-right:18px; margin-left:18px; background-color:#695cfe; 
                font-size:25px; border-radius:7px; padding:6px; cursor: pointer; border: none; color: #fff" 
                onMouseOver="this.style.color='#000'" onMouseOut="this.style.color='#fff'" onclick="Rotate()">

                    <i class='fas fa-sync-alt'></i>
                </button>

                <button style="margin:0px; margin-right:0px; margin-left:14px; background-color:#695cfe; 
                font-size:25px; border-radius:7px; padding:6px; cursor: pointer; border: none; color: #fff" 
                onMouseOver="this.style.color='#000'" onMouseOut="this.style.color='#fff'" onclick="Scale()">

                    <i class='fas fa-expand-arrows-alt'></i>
                </button>
            </li>
            <li> 
                <a href="#" class="camera-btn">Camera
                    <span class="fas fa-caret-down five"></span>
                </a>
                <ul class="submenu">
                    <li>
                        <div class="card-item">
                            <span class="valueSpanFOV">Field of view: 75</span>
                            <input type="range" class="custom-range" id="customFOV" min="0" max="180" value="75">
                        </div>
                        <div class="card-item">
                            <span class="valueSpanNear">Near: 0.1</span>
                            <input type="range" class="custom-range" id="customNear" min="0.1" max="100" value="0.1">
                        </div>
                        <div class="card-item">
                            <span class="valueSpanFar">Far: 1000</span>
                            <input type="range" class="custom-range" id="customFar" min="200" max="2000" value="1000">
                        </div>
                    </li>
                </ul>
            </li>

            <li class="mode">
                <div class="toggle-switch">
                    <span class="label">Dark Mode</span>
                    <span class="switch"></span>
                </div>
            </li>
            

        </ul>   
    </nav>
    <div class="gui-control" style="position: fixed; top: 0;;right: 0;"> <div id="my-gui-container"> </div> </div> 
    <div id="webgl"></div>
    <script>
        $(document).ready(function() {
            const $valueSpanFOV = $('.valueSpanFOV');
            const $valueSpanNear = $('.valueSpanNear');
            const $valueSpanFar = $('.valueSpanFar');

            const $valueFOV = $('#customFOV');
            const $valueNear = $('#customNear');
            const $valueFar = $('#customFar');

            $valueSpanFOV.html("Field of view: " + $valueFOV.val());
            $valueFOV.on('input change', () => {
                $valueSpanFOV.html("Field of view: " + $valueFOV.val());
                setFOV($valueFOV.val());
            });

            $valueSpanNear.html("Near: " + $valueNear.val());
            $valueNear.on('input change', () => {
                $valueSpanNear.html("Near: " + $valueNear.val());
                setNear($valueNear.val());
            });

            $valueSpanFar.html("Far: " + $valueFar.val());
            $valueFar.on('input change', () => {
                $valueSpanFar.html("Far: " + $valueFar.val());
                setFar($valueFar.val());
            });
        });

        function Uploadimage() {
            document.getElementById("texture").click();
        };

        const body = document.querySelector("body"),
            sidebar = body.querySelector(".sidebar"),
            modeSwitch = body.querySelector(".toggle-switch"),
            modeText = body.querySelector(".label");
            
            modeSwitch.addEventListener("click", () =>{
                body.classList.toggle("dark");
                if(body.classList.contains("dark")){
                    ChangeBackGround(1); //dark
                }else{
                    ChangeBackGround(0); //light
                }
            });

        $('.toggle-switch').click(function () {
            $(this).toggleClass("click");
            // $('.sidebar').toggleClass("show");
        });

        $('.btn').click(function () {
            $(this).toggleClass("click");
            $('.sidebar').toggleClass("show");
        });
            
        //open submenu
        $('nav ul li').click(function () {
            var activeSibling = $(this).siblings().filter('.active');
            activeSibling.each(function(index, element) {
                var sibling = $(element);
                sibling.find('.fas').toggleClass("rotate");
            });

            $(this).siblings().find('.submenu').slideUp();
            var isOpen = $(this).find('.submenu').is(':visible');

            // $('.submenu').slideUp();

            if (!isOpen) {
                $(this).find('.submenu').slideDown();
                $(this).find('.fas').toggleClass("rotate");
                $(this).addClass("active").siblings().removeClass("active");
            }else{
                $(this).find('.fas').toggleClass("rotate");
                $(this).find('.submenu').slideUp();
                $(this).removeClass("active");
            }

        });

        $('.submenu').click(function(event){
            event.stopPropagation();
        });
    </script>
    
</body>
<script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
      }
    }
</script>
<script type="module" src="./main.js"></script>

</html>